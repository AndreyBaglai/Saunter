(this.webpackJsonpsaunter=this.webpackJsonpsaunter||[]).push([[0],{119:function(e,t,a){e.exports={text:"Logo_text__1FyMF",icon:"Logo_icon__2vGRc",logoWrapper:"Logo_logoWrapper__iHV3N"}},120:function(e,t,a){e.exports={listWrapper:"PathsListWrapper_listWrapper__oVBvQ",inputSearch:"PathsListWrapper_inputSearch__23jv8",icon:"PathsListWrapper_icon__3IP5A"}},147:function(e,t,a){e.exports={customBtn:"CustomButton_customBtn__xmFnk"}},148:function(e,t,a){e.exports={header:"Header_header__2z55g"}},149:function(e,t,a){e.exports={mapWrapper:"Map_mapWrapper__2ULhj"}},152:function(e,t,a){e.exports={main:"Main_main__3fHNf"}},154:function(e,t,a){e.exports={app:"App_app__2PWlB"}},249:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(23),c=a.n(r),o=a(27),i=a(36),s=a(40),l=a(43),d=Object(i.b)({name:"paths",initialState:[{id:"dhfhdhj",title:"Test path",description:{short:"Some short text",full:"Some full text"},favorite:!1,selected:!1,distance:.534,directions:[{lat:48.4499013737848,lng:34.98049320537708},{lat:48.448591982505036,lng:34.98019279796741}]}],reducers:{add:function(e,t){return[].concat(Object(l.a)(e),[t.payload])},loadFromLS:function(e,t){return Object(l.a)(t.payload)},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))},setFavorite:function(e,t){var a=e.find((function(e){return e.id===t.payload})),n=e.filter((function(e){return e.id!==t.payload}));return[a=Object(s.a)(Object(s.a)({},a),{},{favorite:!0})].concat(Object(l.a)(n))},removeFavorite:function(e,t){var a=e.find((function(e){return e.id===t.payload})),n=e.filter((function(e){return e.id!==t.payload}));return a=Object(s.a)(Object(s.a)({},a),{},{favorite:!1}),[].concat(Object(l.a)(n),[a])},select:function(e,t){e.forEach((function(e){e.id===t.payload?e.selected=!0:e.selected=!1}))}}}).reducer,u=Object(i.b)({name:"form",initialState:{isOpen:!1},reducers:{open:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{isOpen:t.payload})},close:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{isOpen:t.payload})}}}).reducer,p=Object(i.b)({name:"currentPath",initialState:{},reducers:{set:function(e,t){return Object(s.a)({},t.payload)},remove:function(e,t){return t.payload}}}).reducer,m=Object(i.b)({name:"directions",initialState:{},reducers:{add:function(e,t){return Object(l.a)(t.payload)},clean:function(e,t){return t.payload}}}).reducer,j=Object(i.a)({reducer:{paths:d,form:u,currentPath:p,directions:m}}),f=(a(171),a(251)),h=a(255),b=a(257),O=a(119),x=a.n(O),_=a(7),v=function(){return Object(_.jsxs)("div",{className:x.a.logoWrapper,children:[Object(_.jsx)(b.a,{twoToneColor:"#9aed00",className:x.a.icon}),Object(_.jsx)(h.a.Text,{className:x.a.text,strong:!0,children:"Saunter"})]})},y=a(79),g=a(147),w=a.n(g),N=function(e){var t=e.text,a=void 0===t?"":t,n=e.size,r=void 0===n?"middle":n,c=e.shape,o=void 0===c?"round":c,i=e.icon,s=e.htmlType,l=void 0===s?"button":s,d=e.handleFunc,u=void 0===d?function(){}:d;return Object(_.jsx)(y.a,{onClick:u,className:w.a.customBtn,size:r,type:"ghost",shape:o,icon:i,htmlType:l,children:a})},T=a(148),k=a.n(T),P=function(){var e=Object(o.b)();return Object(_.jsx)(f.a,{className:"row ".concat(k.a.header),title:Object(_.jsx)(v,{}),extra:[Object(_.jsx)(N,{size:"large",text:"Add path",htmlType:"button",handleFunc:function(){return e({type:"form/open",payload:!0})}},"1")]})},F=a(80),S=a(53),L=a(44),M=a(253),I=a(158),C=a(149),W=a.n(C),B=function(e){var t=e.id,a=e.isEdit,r=e.isSetMarkers,c=Object(o.c)((function(e){return e.currentPath})),i=Object(o.b)();return Object(n.useEffect)((function(){var e,n;new I.a({apiKey:"".concat("AIzaSyD8I-uKxKmpAQxyhogTqJvJrl6cDtyYmoI"),version:"weekly"}).load().then((function(){var r=document.getElementById(t);r&&(e=new google.maps.Map(r,{center:{lat:48.450001,lng:34.983334},zoom:15}),(n=new google.maps.Polyline({strokeColor:"#9aed00",strokeOpacity:1,strokeWeight:3})).setMap(e),a&&e.addListener("click",(function(t){var a=n.getPath();a.push(t.latLng);var r=n.getPath().Be||[],c=r.map((function(e){return{lat:e.lat(),lng:e.lng()}}));r&&i({type:"directions/add",payload:c}),new google.maps.Marker({position:t.latLng,title:"#"+a.getLength(),map:e})})),!a&&(null===c||void 0===c?void 0:c.directions)&&(n=new google.maps.Polyline({path:Object(l.a)(null===c||void 0===c?void 0:c.directions.map((function(e){return{lat:e.lat,lng:e.lng}}))),strokeColor:"#9aed00",strokeOpacity:1,strokeWeight:3})),n.setMap(e),!a&&(null===c||void 0===c?void 0:c.directions)&&c.directions.forEach((function(t){new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:e})})))}))}),[a,r,c,t]),Object(_.jsx)("div",{id:t,className:W.a.mapWrapper})},E="paths",A=function(e){localStorage.removeItem(E),localStorage.setItem(E,JSON.stringify(e))},z=function(){var e=localStorage.getItem(E);return e?JSON.parse(e):[]},V=function(e){var t=z();if(t.length){var a=t.map((function(t){return t.id===e&&(t.favorite=!t.favorite),t})).sort((function(e,t){return e.favorite===t.favorite?0:e.favorite?-1:1}));A(a)}},D=a(68),J=a.n(D),H=function(){var e,t=Object(o.c)((function(e){return e.currentPath})),a=Object(n.useState)(null),r=Object(S.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(!1),l=Object(S.a)(s,2),d=l[0],u=l[1],p=Object(o.b)();Object(n.useEffect)((function(){i(t)}),[c,t,d]);return Object(_.jsx)(L.a,{className:"col-md-5 offset-md-1 col-sm-12 ".concat(J.a.pathView),children:c&&Object.keys(t).length?Object(_.jsxs)(M.a,{headStyle:{color:"#fff",fontSize:"24px"},className:J.a.card,title:c.title,extra:Object(_.jsxs)("h5",{className:J.a.distance,children:[c.distance," km"]}),children:[Object(_.jsx)("p",{className:J.a.fullDescription,children:null===(e=c.description)||void 0===e?void 0:e.full}),Object(_.jsx)(B,{id:"pathMap",isEdit:!1,isSetMarkers:!0}),Object(_.jsxs)("div",{className:J.a.wrapperBtn,children:[c.favorite||d?Object(_.jsx)(y.a,{"data-id":c.id,block:!0,type:"link",onClick:function(e){var t=e.currentTarget,a=t.dataset.id;V(a),u(!1),p({type:"paths/removeFavorite",payload:t.dataset.id})},children:"Remove from favorite"}):Object(_.jsx)(y.a,{"data-id":c.id,block:!0,type:"link",onClick:function(e){var t=e.currentTarget.dataset.id;u(!0),V(t),p({type:"paths/setFavorite",payload:t})},children:"Add to favorite"}),Object(_.jsx)(y.a,{"data-id":c.id,block:!0,type:"link",danger:!0,onClick:function(e){var t=e.currentTarget.dataset.id;i(null),function(e){var t=z();if(t.length){var a=t.filter((function(t){return t.id!==e}));A(a)}}(t),p({type:"paths/remove",payload:t}),p({type:"currentPath/remove",payload:null})},children:"Remove"})]})]}):Object(_.jsx)(h.a.Text,{className:J.a.defaultText,children:"Select any path"})})},R=a(256),q=a(252),K=a(258),G=a(259),Q=a(260),U=a(63),X=a(48),Y=a.n(X),Z=function(e){var t=e.filterPaths,a=Object(o.b)(),n=function(e){var n=e.currentTarget,r=t.find((function(e){return e.id===n.id}));a({type:"paths/select",payload:n.id}),a({type:"currentPath/set",payload:r})},r=function(e){var t=e.currentTarget.dataset.id;V(t),a({type:"paths/setFavorite",payload:t})},c=function(e){var t=e.currentTarget,n=t.dataset.id;V(n),a({type:"paths/removeFavorite",payload:t.dataset.id})};return Object(_.jsx)(q.b,{className:Y.a.list,dataSource:t,bordered:!0,locale:{emptyText:Object(_.jsx)(h.a.Text,{className:Y.a.emptyText,children:"No more paths"})},renderItem:function(e){return Object(_.jsxs)(q.b.Item,{className:"container px-md-2 px-lg-6 ".concat(Y.a.listItem),id:e.id,onClick:n,children:[Object(_.jsx)(q.b.Item.Meta,{className:Y.a.meta,avatar:Object(_.jsx)(K.a,{className:"d-none d-md-block ".concat(Y.a.itemMarker),twoToneColor:"true"}),title:Object(_.jsxs)(_.Fragment,{children:[e.favorite?Object(_.jsx)(G.a,{"data-id":e.id,style:{color:"yellow"},onClick:c}):Object(_.jsx)(Q.a,{"data-id":e.id,style:{color:"yellow"},onClick:r}),Object(_.jsx)(h.a.Text,{className:Y.a.itemTitle,children:e.title})]}),description:Object(_.jsx)(h.a.Paragraph,{className:"d-none d-md-block ".concat(Y.a.description),children:e.description.short})}),Object(_.jsx)(h.a.Text,{className:Y.a.distance,children:"".concat(e.distance," km")}),Object(_.jsx)(U.a,{className:"d-none d-md-block ".concat(Y.a.leftArrow)})]},e.id)}})},$=a(60),ee=a(120),te=a.n(ee),ae=function(){var e=Object(o.c)((function(e){return e.paths})),t=Object(n.useState)(e),a=Object(S.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(S.a)(i,2),l=s[0],d=s[1],u=Object(o.b)();Object(n.useEffect)((function(){var e=z();e.length>0&&(c(e),u({type:"paths/loadFromLS",payload:e}))}),[]),Object(n.useEffect)((function(){if(l){var t=e.filter((function(e){return e.title.toLowerCase().includes(l.toLowerCase())||e.description.short.toLowerCase().includes(l.toLowerCase())}));c(t)}else c(e)}),[e]);var p=function(){d(""),c(e)};return Object(_.jsxs)(L.a,{className:"col-md-6 col-sm-12 ".concat(te.a.listWrapper),children:[Object(_.jsx)(F.a,{children:Object(_.jsx)(L.a,{span:24,children:Object(_.jsx)(R.a,{value:l,id:"search",className:te.a.inputSearch,placeholder:"Input search text",onChange:function(t){var a=t.target.value;""===a&&p();var n=e.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())||e.description.short.toLowerCase().includes(a.toLowerCase())}));d(a),c(n)},suffix:Object(_.jsx)($.a,{onClick:p,className:te.a.icon})})})}),Object(_.jsx)(Z,{filterPaths:r})]})},ne=a(152),re=a.n(ne),ce=function(){return Object(_.jsx)("main",{className:"row ".concat(re.a.main),children:Object(_.jsxs)(F.a,{justify:"space-around",children:[Object(_.jsx)(ae,{}),Object(_.jsx)(H,{})]})})},oe=a(129),ie=a.n(oe),se=a(153),le=a(76),de=a(157),ue=a(254),pe=a(41),me=a.n(pe),je=document.getElementById("root-form"),fe=function(){var e=Object(n.useState)(0),t=Object(S.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),d=Object(S.a)(s,2),u=d[0],p=d[1],m=Object(o.c)((function(e){return e.form.isOpen})),j=Object(o.c)((function(e){return e.paths})),b=Object(o.c)((function(e){return e.directions})),O=Object(o.b)(),x=function(){var e=Object(se.a)(ie.a.mark((function e(t,a){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[{lat:a.lat,lng:a.lng},"Start"],destinations:["End",{lat:t.lat,lng:t.lng}],travelMode:google.maps.TravelMode.DRIVING},(function(e,t){"OK"===t&&r((function(t){try{return t+=e.rows[0].elements[1].distance.value/1e3,Number(t.toFixed(3))}catch(a){return console.log("Failed to build routes"),p(!u),O({type:"directions/clean",payload:[]}),0}}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(b.length>1){var e=b[b.length-1],t=b[b.length-2];x(e,t)}}),[b]);return m?c.a.createPortal(Object(_.jsx)(F.a,{className:"container ".concat(me.a.modalWrapper),children:Object(_.jsxs)(L.a,{className:"row col-md-8 offset-md-2 col-10 offset-1",children:[Object(_.jsx)(f.a,{className:me.a.modalTitle,title:Object(_.jsx)(h.a.Text,{className:me.a.title,children:"Add new path"}),extra:[Object(_.jsx)(N,{handleFunc:function(){r(0),O({type:"form/close",payload:!1}),O({type:"directions/clean",payload:[]})},shape:"circle",icon:Object(_.jsx)(le.a,{}),size:"middle",text:""},"2")]}),Object(_.jsxs)(F.a,{className:"container ".concat(me.a.modal),children:[Object(_.jsx)(L.a,{className:"col-md-6 col-12",children:Object(_.jsxs)(ue.a,{className:"".concat(me.a.form),layout:"vertical",name:"new-path",onFinish:function(e){if(0===a||b.length<2)de.b.error("Please, add minimum two markers on map");else{var t={id:Object(i.c)(),title:e.title,description:{short:e.shortText,full:e.fullText},selected:!1,distance:a,favorite:!1,directions:b};r(0),O({type:"paths/add",payload:t}),O({type:"form/close",payload:!1}),O({type:"directions/clean",payload:[]}),A([].concat(Object(l.a)(j),[t]))}},children:[Object(_.jsx)(ue.a.Item,{className:me.a.formField,name:"title",label:"Title",rules:[{required:!0,message:"Please, input title path"},{max:12,message:"Title must be not more 12 symbols"}],children:Object(_.jsx)(R.a,{})}),Object(_.jsx)(ue.a.Item,{className:me.a.formField,rules:[{required:!0,message:"Please, input short description path"},{max:40,message:"Text must be not more 40 symbols"}],name:"shortText",label:"Short description",children:Object(_.jsx)(R.a.TextArea,{})}),Object(_.jsx)(ue.a.Item,{className:me.a.formField,name:"fullText",label:"Full description",rules:[{required:!0,message:"Please, input full description path"},{max:160,message:"Text must be not more 160 symbols"}],children:Object(_.jsx)(R.a.TextArea,{})}),Object(_.jsx)(ue.a.Item,{children:Object(_.jsx)(h.a.Text,{className:me.a.distance,children:"Length: ".concat(a," km")})}),Object(_.jsx)(ue.a.Item,{children:Object(_.jsx)(N,{handleFunc:function(){},text:"Add path",size:"large",htmlType:"submit"})})]})}),Object(_.jsxs)(L.a,{className:"col-md-5 offset-md-1 col-12 ".concat(me.a.mapWrapper),children:[Object(_.jsx)(B,{id:"mapForm",isEdit:!0,isSetMarkers:u}),Object(_.jsx)("div",{className:me.a.removeBtn,children:Object(_.jsx)(N,{text:"Remove markers",size:"middle",shape:"round",handleFunc:function(){r(0),p(!u),O({type:"directions/clean",payload:[]})}})})]})]})]})}),je):c.a.createPortal("",je)},he=a(154),be=a.n(he),Oe=function(){return Object(_.jsxs)("div",{className:"container-fluid ".concat(be.a.app),children:[Object(_.jsx)(P,{}),Object(_.jsx)(ce,{}),Object(_.jsx)(fe,{})]})};a(248);c.a.render(Object(_.jsx)(o.a,{store:j,children:Object(_.jsx)(Oe,{})}),document.getElementById("root"))},41:function(e,t,a){e.exports={modalWrapper:"FormModal_modalWrapper__2a4lz",title:"FormModal_title__1T0vG",modal:"FormModal_modal__1HnlG",modalTitle:"FormModal_modalTitle__1uKxB",form:"FormModal_form__x07At",formField:"FormModal_formField__1Ydgf",mapWrapper:"FormModal_mapWrapper__3P6yy",distance:"FormModal_distance__2leQ1",removeBtn:"FormModal_removeBtn__3cN9g"}},48:function(e,t,a){e.exports={list:"ListPaths_list__rro4o",listItem:"ListPaths_listItem__16vyR",emptyText:"ListPaths_emptyText__3XB7P",leftArrow:"ListPaths_leftArrow__3QH8p",itemTitle:"ListPaths_itemTitle__28ogw",meta:"ListPaths_meta__29dXu",title:"ListPaths_title__1tkdl",description:"ListPaths_description__w3NqW",distance:"ListPaths_distance__3b9FW",itemMarker:"ListPaths_itemMarker__2LcTJ"}},68:function(e,t,a){e.exports={pathView:"PathView_pathView__1vzgd",card:"PathView_card__3d2OC",distance:"PathView_distance__IfJ98",wrapperBtn:"PathView_wrapperBtn__MlrlE",defaultText:"PathView_defaultText__2UZHk",fullDescription:"PathView_fullDescription__1B-9n"}}},[[249,1,2]]]);
//# sourceMappingURL=main.e72a53fe.chunk.js.map